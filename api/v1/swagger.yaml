openapi: 3.1.0
x-stoplight:
  id: qwywpxxlzuzxl
info:
  title: Onelyk Swagger UI
  version: '1.0'
  summary: Onelyk Api
  description: Onelyk Api
servers:
  - url: 'http://localhost:8000'
    description: local
  - url: 'https://8l4qkmp2-8000.inc1.devtunnels.ms'
    description: dev
  - url: 'http://localhost:3000'
    description: backup
paths:
  /user/register:
    post:
      summary: User Registration
      operationId: regiester-user
      responses:
        '200':
          $ref: '#/components/responses/Register'
        '400':
          $ref: '#/components/responses/Error'
        '500':
          $ref: '#/components/responses/Error'
      requestBody:
        $ref: '#/components/requestBodies/Register'
      description: Register new user
      x-stoplight:
        id: 7xhk6wcrsm2m3
      parameters: [ ]
      x-internal: false
      tags:
        - User
    parameters: [ ]
  /user/login:
    post:
      summary: User Login
      tags:
        - User
      responses:
        '200':
          $ref: '#/components/responses/Login'
        '500':
          $ref: '#/components/responses/Error'
      operationId: login-user
      x-stoplight:
        id: 8m90dlv0xc09x
      requestBody:
        $ref: '#/components/requestBodies/Login'
  /auth/accessToken:
    get:
      summary: Request AccessToken
      responses: { }
      operationId: get-auth-accesstoken
      x-stoplight:
        id: 91ttdhzlaulzl
      parameters:
        - schema:
            type: string
          in: query
          name: email
          description: User's email
        - schema:
            type: string
          in: cookie
          name: refreshToken
          description: Valid Refresh token
      tags:
        - Auth
      description: ''
    parameters: [ ]
  /auth/verifyOtp:
    post:
      summary: Verify OTP
      responses:
        '200':
          $ref: '#/components/responses/Login'
        '500':
          $ref: '#/components/responses/Error'
      operationId: post-auth-verifyOtp
      x-stoplight:
        id: 2mys6pc0tw9tn
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - otp
              properties:
                email:
                  type: string
                  x-stoplight:
                    id: inlz8rtznw2gd
                otp:
                  type: string
                  x-stoplight:
                    id: r2d7ubmexnlzc
      tags:
        - Auth
  /user/logout:
    post:
      summary: User Logout
      tags:
        - User
      responses:
        '200':
          description: OK
          content: { }
      operationId: post-user-logout
      x-stoplight:
        id: rl0dfsy0rxz57
  /user:
    get:
      summary: Get User
      tags:
        - User
      responses: { }
      operationId: get-user
      x-stoplight:
        id: ztlhlwiajutbr
      security:
        - Bearer: [ ]
  '/user/{propertyId}':
    parameters:
      - schema:
          type: string
        name: propertyId
        in: path
        required: true
    get:
      summary: Get users by property id
      responses: { }
      operationId: get-user-propertyId
      x-stoplight:
        id: 5ttcw4oqj3x6z
      security:
        - Bearer: [ ]
      tags:
        - User
  /property:
    post:
      summary: Create property (Property Onboarding)
      tags:
        - Property
      responses:
        '200':
          $ref: '#/components/responses/PropertyResponse'
        4XX:
          $ref: '#/components/responses/Error'
        5XX:
          $ref: '#/components/responses/Error'
      operationId: Create-Property
      x-stoplight:
        id: ryjalcd5tmwuq
      security:
        - Bearer: [ ]
      requestBody:
        $ref: '#/components/requestBodies/CreateProperty'
    get:
      summary: Get all properties associated with user
      tags:
        - Property
      responses: { }
      operationId: get-all-property-of-user
      x-stoplight:
        id: u96bywly9mqg4
      security:
        - Bearer: [ ]
  /twilio/phoneNumbers:
    get:
      summary: Get Available Phone Numbers list
      responses: { }
      operationId: get-twilio-phoneNumbers
      x-stoplight:
        id: kbqsty6fg7exx
      security:
        - Bearer: [ ]
      parameters:
        - schema:
            type: string
          in: query
          name: country
      tags:
        - Twilio
  '/twilio/{propertyId}/buyPhoneNumber':
    parameters:
      - schema:
          type: string
        name: propertyId
        in: path
        required: true
    post:
      summary: Buy Phonenumber for Property
      tags:
        - Twilio
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                required:
                  - result
                properties:
                  result:
                    type: object
                    x-stoplight:
                      id: oubvrjm75peom
                    required:
                      - message
                    properties:
                      message:
                        type: string
                        x-stoplight:
                          id: m328ktmkl6mxn
      operationId: post-twilio-propertyId-buyPhoneNumber
      x-stoplight:
        id: r0xyiornttr0a
      description: ''
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - phoneNumber
              properties:
                phoneNumber:
                  type: string
                  x-stoplight:
                    id: c4sii266sgyvi
      security:
        - Bearer: [ ]
  '/twilio/{propertyId}/createSubaccount':
    parameters:
      - schema:
          type: string
        name: propertyId
        in: path
        required: true
    post:
      summary: Create Subaccount for the property
      tags:
        - Twilio
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                required:
                  - result
                properties:
                  result:
                    type: object
                    x-stoplight:
                      id: zepgbb5r0mq6q
                    required:
                      - message
                    properties:
                      message:
                        type: string
                        x-stoplight:
                          id: 3sm8azvocsfrg
      operationId: post-twilio-propertyId-createSubaccount
      x-stoplight:
        id: 49qo0ggfuutup
      security:
        - Bearer: [ ]
  /auth/resendOtp:
    post:
      summary: Resend Otp
      tags:
        - Auth
      responses:
        '200':
          description: Email Sent
          headers: { }
          content:
            application/json:
              schema:
                type: object
                required:
                  - message
                properties:
                  message:
                    type: string
                    x-stoplight:
                      id: bufkcslp1clep
      operationId: post-auth-resendOtp
      x-stoplight:
        id: vnabujuuggkfj
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  x-stoplight:
                    id: b35muo8oajf1m
  '/property/{propertyId}':
    parameters:
      - schema:
          type: string
        name: propertyId
        in: path
        required: true
    get:
      summary: Get Property by PropertyId
      tags:
        - Property
      responses:
        '200':
          $ref: '#/components/responses/PropertyResponse'
      operationId: get-property-propertyId
      x-stoplight:
        id: jqjeu1hs5q8ry
      security:
        - Bearer: [ ]
  /country:
    get:
      summary: Get all countries
      tags:
        - Country
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      countries:
                        type: array
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                            iso2:
                              type: string
      operationId: get-country
      x-stoplight:
        id: eahvalgj8q15t
  '/country/{country}/states':
    parameters:
      - schema:
          type: string
        name: country
        in: path
        required: true
        description: ISO2 code
    get:
      summary: Get all states of the country
      tags:
        - Country
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      states:
                        type: array
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                            state_code:
                              type: string
      operationId: get-country-countryId-states
      x-stoplight:
        id: yewamkjrance5
  '/country/{country}/timezones':
    parameters:
      - schema:
          type: string
        name: country
        in: path
        required: true
        description: ISO2 code
    get:
      summary: Get all timezones of a country
      tags:
        - Country
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      timezones:
                        type: array
                        items:
                          type: object
                          properties:
                            zoneName:
                              type: string
                            gmtOffset:
                              type: integer
                            gmtOffsetName:
                              type: string
                            abbreviation:
                              type: string
                            tzName:
                              type: string
      operationId: get-country-countryId-timezone
      x-stoplight:
        id: cr2z17dg4genl
  '/country/{country}/{zipcode}':
    parameters:
      - schema:
          type: string
        name: zipcode
        in: path
        required: true
        description: zip/postal code
      - schema:
          type: string
        name: country
        in: path
        required: true
        description: ISO2 code
    get:
      summary: Get location based on zipcode
      tags:
        - Country
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      zipcodes:
                        type: object
                        properties:
                          country_code:
                            type: string
                          zipcode:
                            type: string
                          place:
                            type: string
                          state:
                            type: string
                          state_code:
                            type: string
                          province:
                            type: string
                          province_code:
                            type: string
                          community:
                            type: string
                          community_code:
                            type: string
                          latitude:
                            type: string
                          longitude:
                            type: string
                x-examples:
                  Example 1:
                    result:
                      zipcodes:
                        country_code: US
                        zipcode: '84765'
                        place: Santa Clara
                        state: Utah
                        state_code: UT
                        province: Washington
                        province_code: '053'
                        community: ''
                        community_code: ''
                        latitude: '37.1282'
                        longitude: '-113.676'
      operationId: get-country-countrycode-zipcode
      x-stoplight:
        id: rt0gmfe39ejzk
  '/country/{country}/{state}/cities':
    parameters:
      - schema:
          type: string
        name: country
        in: path
        required: true
        description: ISO2 code
      - schema:
          type: string
        name: state
        in: path
        required: true
        description: State code
    get:
      summary: Get cities based on state and country
      tags:
        - Country
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      cities:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            name:
                              type: string
                            latitude:
                              type: string
                            longitude:
                              type: string
              examples: { }
      operationId: get-country-country-state-cities
      x-stoplight:
        id: z3giqx0o6pq65
  '/twilio/{propertyId}/tollFreeVerificationStatus':
    parameters:
      - schema:
          type: string
        name: propertyId
        in: path
        required: true
    get:
      summary: Get toll free verification status
      tags:
        - Twilio
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    x-stoplight:
                      id: 3iuhwnftn55dz
                    properties:
                      status:
                        type: string
                        x-stoplight:
                          id: 4aqy1y8chykq8
      operationId: get-twilio-propertyId-tollfreeVerificationStatus
      x-stoplight:
        id: es0glpjzixbxx
      security:
        - Bearer: [ ]
components:
  schemas:
    User:
      title: User
      type: object
      x-stoplight:
        id: 5dg2siga24c7w
      x-internal: false
      required:
        - id
        - firstName
        - lastName
        - email
        - password_hash
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique identifier for the given user.
          x-stoplight:
            id: cs6bvaybzvuev
        firstName:
          type: string
          x-stoplight:
            id: p58mbyd0dw49x
        lastName:
          type: string
          x-stoplight:
            id: h05y8uq3y9r56
        email:
          type: string
          format: email
          x-stoplight:
            id: nmt96os2w7uss
        password_hash:
          type: string
          x-stoplight:
            id: cvqu8wa7bx4ns
        createdAt:
          type: string
          x-stoplight:
            id: 2ukwtpuosgiw2
        updatedAt:
          type: string
          x-stoplight:
            id: mpyezhommga9e
    UserWithoutPassword:
      title: UserWithoutPassword
      x-stoplight:
        id: ei4byjohzee93
      type: object
      required:
        - _id
        - firstName
        - lastName
        - role
        - email
        - active
        - createdAt
        - updatedAt
        - __v
        - phoneNumber
      properties:
        _id:
          type: string
          x-stoplight:
            id: gohzxvaj3vvp8
        firstName:
          type: string
          x-stoplight:
            id: qrmj9880mzzls
        lastName:
          type: string
          x-stoplight:
            id: 1e4lpve2v7yxt
        role:
          type: string
          x-stoplight:
            id: 5uepi7y0dnuw4
        email:
          type: string
          x-stoplight:
            id: ys5dn6hfkwzv5
        active:
          type: boolean
          x-stoplight:
            id: 63k9klrukwmy0
        createdAt:
          type: string
          x-stoplight:
            id: q2a1eoclhqubx
          format: date-time
        updatedAt:
          type: string
          x-stoplight:
            id: uxzsvqnfapod2
          format: date-time
        __v:
          type: integer
          x-stoplight:
            id: 74h3y0npjisdo
        phoneNumber:
          type: string
          x-stoplight:
            id: asmx1af0fxhrn
      description: ''
    Property:
      type: object
      x-examples:
        Example 1:
          _id: 6698ccbc3bfa38a274593d9b
          name: Onelyk Test Property
          email: jainilpatel145@gmail.com
          phoneNumber: '1234567890'
          website: 'https://www.onelyk.com'
          about: This is a onelyk test property
          country: United States
          state: New York
          city: New York
          address: 55 Street
          countryCode: '+1'
          active: true
          createdAt: '2024-07-18T08:05:16.703Z'
          updatedAt: '2024-07-18T08:05:16.735Z'
          __v: 0
          coverUrl: 'https://onelyk-images-bucket.s3.amazonaws.com/property/6698ccbc3bfa38a274593d9b/cover/cover.jpg'
          logoUrl: 'https://onelyk-images-bucket.s3.amazonaws.com/property/6698ccbc3bfa38a274593d9b/logo/logo.jpg'
      properties:
        _id:
          type: string
        name:
          type: string
        email:
          type: string
        phoneNumber:
          type: string
        website:
          type: string
        about:
          type: string
        country:
          type: string
        state:
          type: string
        city:
          type: string
        address:
          type: string
        countryCode:
          type: string
        active:
          type: boolean
        createdAt:
          type: string
        updatedAt:
          type: string
        __v:
          type: integer
        coverUrl:
          type: string
        logoUrl:
          type: string
        zipcode:
          type: string
          x-stoplight:
            id: odk128ck94ppg
  securitySchemes:
    Bearer:
      type: http
      scheme: bearer
  requestBodies:
    Register:
      content:
        application/json:
          schema:
            type: object
            required:
              - firstName
              - lastName
              - password
              - email
              - phoneNumber
            properties:
              firstName:
                type: string
                x-stoplight:
                  id: t74ng1fmgfprp
              lastName:
                type: string
                x-stoplight:
                  id: 1ank8gtz32nbd
              password:
                type: string
                x-stoplight:
                  id: lzf7jpfpki1jt
              email:
                type: string
                x-stoplight:
                  id: v26sqcth975yu
              phoneNumber:
                type: string
                x-stoplight:
                  id: cdsekjly8cvk3
      description: Register Request
    Login:
      content:
        application/json:
          schema:
            type: object
            required:
              - email
              - password
            properties:
              email:
                type: string
                x-stoplight:
                  id: xc87f810xeu91
              password:
                type: string
                x-stoplight:
                  id: bj7vqbzwu059u
          examples:
            Example 1:
              value:
                email: jainil1235@gmail.com
                password: '123456'
      description: User Login request
    User:
      content:
        application/json:
          schema:
            type: object
            required:
              - firstName
              - lastName
              - password
              - role
              - email
              - phoneNumber
            properties:
              firstName:
                type: string
                x-stoplight:
                  id: u7qqzz39473az
              lastName:
                type: string
                x-stoplight:
                  id: 0c5qz3apuyb88
              password:
                type: string
                x-stoplight:
                  id: incwcqb35ezq0
              role:
                type: string
                x-stoplight:
                  id: wisv3cyjuhom1
              active:
                type: string
                x-stoplight:
                  id: 2vehxlnkx5vc8
              email:
                type: string
                x-stoplight:
                  id: 9igrtk1vlb2fo
              phoneNumber:
                type: string
                x-stoplight:
                  id: vt2grtcr0louo
      description: User create
    CreateProperty:
      content:
        multipart/form-data:
          schema:
            type: object
            x-examples:
              Example 1:
                _id: String
                name: String
                email: String
                phoneNumber: String
                website: String
                about: String
                logoUrl: String
                coverUrl: String
                country: String
                state: String
                city: String
                address: String
                countryCode: String
                active: Boolean
                __v: Number
                createdAt: Date
                updatedAt: Date
            required:
              - name
              - email
              - phoneNumber
              - website
              - about
              - logo
              - cover
              - country
              - state
              - city
              - address
              - countryCode
              - standardCheckinTime
              - standardCheckoutTime
              - timezone
              - defaultNewDayTime
              - zipcode
            properties:
              name:
                type: string
              email:
                type: string
              phoneNumber:
                type: string
              website:
                type: string
              about:
                type: string
              logo:
                type: string
                x-stoplight:
                  id: asfs1cpbkf7v4
                format: binary
              cover:
                type: string
                x-stoplight:
                  id: 44drsy80ont2v
                format: binary
              country:
                type: string
              state:
                type: string
              city:
                type: string
              address:
                type: string
              countryCode:
                type: string
              standardCheckinTime:
                type: string
                x-stoplight:
                  id: mwfb9m023itk0
              standardCheckoutTime:
                type: string
                x-stoplight:
                  id: 1t24qd9okarw1
              timezone:
                type: string
                x-stoplight:
                  id: h0nl4ei7d0q1o
              defaultNewDayTime:
                type: string
                x-stoplight:
                  id: 3nmhpf9z8g4q7
              zipcode:
                type: string
                x-stoplight:
                  id: w9poyxlogsn0q
      description: Create property Request
    PhoneNumber:
      content:
        application/json:
          schema:
            type: object
      description: ''
  responses:
    Login:
      description: Login response
      content:
        application/json:
          schema:
            type: object
            properties:
              result:
                x-stoplight:
                  id: cn6arwxgkipsq
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/UserWithoutPassword'
                    x-stoplight:
                      id: tx2oe7mwhw59e
                  accessToken:
                    type: string
                    x-stoplight:
                      id: kn1w394ufgv0s
      headers: { }
    Register:
      description: Register response
      content:
        application/json:
          schema:
            type: object
            properties:
              result:
                type: object
                x-stoplight:
                  id: cvu5fj231nefn
                properties:
                  message:
                    type: string
                    x-stoplight:
                      id: 24dudrs50p4gu
    Error:
      description: Standard error response
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: object
                x-stoplight:
                  id: evqhzeygpybsg
    User:
      description: User response
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UserWithoutPassword'
    PropertyResponse:
      description: Property Response
      content:
        application/json:
          schema:
            type: object
            properties:
              result:
                type: object
                properties:
                  property:
                    type: object
                    properties:
                      _id:
                        type: string
                      name:
                        type: string
                      email:
                        type: string
                      phoneNumber:
                        type: string
                      website:
                        type: string
                      about:
                        type: string
                      country:
                        type: string
                      state:
                        type: string
                      city:
                        type: string
                      address:
                        type: string
                      countryCode:
                        type: string
                      active:
                        type: boolean
                      createdAt:
                        type: string
                      updatedAt:
                        type: string
                      __v:
                        type: integer
                      coverUrl:
                        type: string
                      logoUrl:
                        type: string
    GetAllPropertyResponse:
      description: All property response
      content:
        application/json:
          schema:
            type: object
            properties:
              '':
                type: string
                x-stoplight:
                  id: l1ju0k5o5khvd
